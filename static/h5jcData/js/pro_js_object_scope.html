<link rel="stylesheet" type="text/css" href="../c3.css" />


<div id="wrapper">
<div id="maincontent">

<h1>ECMAScript 对象作用域</h1>

<div>
<p><strong>作用域指的是变量的适用范围。</strong></p>
</div>


<div>
<h2>关键字 this</h2>

<h3>this 的功能</h3>

<p>在 ECMAScript 中，要掌握的最重要的概念之一是关键字 this 的用法，它用在对象的方法中。关键字 this 总是指向调用该方法的对象，例如：</p>

<pre>
var oCar = new Object;
oCar.color = &quot;red&quot;;
oCar.showColor = function() {
  alert(<code>this.color</code>);
};

oCar.showColor();		<span>//输出 &quot;red&quot;</span>
</pre>

<p class="tiy"><a href="javascript:tiy.run('jseg_pro_object_scope_this_1')" >TIY</a></p>

<p>在上面的代码中，关键字 this 用在对象的 showColor() 方法中。在此环境中，this 等于 oCar。下面的代码与上面的代码的功能相同：</p>

<pre>
var oCar = new Object;
oCar.color = &quot;red&quot;;
oCar.showColor = function() {
  alert(<code>oCar.color</code>);
};

oCar.showColor();		<span>//输出 &quot;red&quot;</span>
</pre>

<p class="tiy"><a href="javascript:tiy.run('jseg_pro_object_scope_this_2')" >TIY</a></p>

<h3>使用 this 的原因</h3>

<p>为什么使用 this 呢？因为在实例化对象时，总是不能确定开发者会使用什么样的变量名。使用 this，即可在任何多个地方重用同一个函数。请思考下面的例子：</p>

<pre>
function showColor() {
  alert(<code>this.color</code>);
};

var oCar1 = new Object;
oCar1.color = &quot;red&quot;;
oCar1.showColor = showColor;

var oCar2 = new Object;
oCar2.color = &quot;blue&quot;;
oCar2.showColor = showColor;

oCar1.showColor();		<span>//输出 &quot;red&quot;</span>
oCar2.showColor();		<span>//输出 &quot;blue&quot;</span>
</pre>

<p class="tiy"><a href="javascript:tiy.run('jseg_pro_object_scope_this_3')" >TIY</a></p>

<p>在上面的代码中，首先用 this 定义函数 showColor()，然后创建两个对象（oCar1 和 oCar2），一个对象的 color 属性被设置为 &quot;red&quot;，另一个对象的 color 属性被设置为 &quot;blue&quot;。两个对象都被赋予了属性 showColor，指向原始的 showColor () 函数（注意这里不存在命名问题，因为一个是全局函数，而另一个是对象的属性）。调用每个对象的 showColor()，oCar1 输出是 &quot;red&quot;，而 oCar2 的输出是 &quot;blue&quot;。这是因为调用 oCar1.showColor() 时，函数中的 this 关键字等于 oCar1。调用 oCar2.showColor() 时，函数中的 this 关键字等于 oCar2。</p>

<p>注意，引用对象的属性时，必须使用 this 关键字。例如，如果采用下面的代码，showColor() 方法不能运行：</p>

<pre>
function showColor() {
  alert(<code>color</code>);
};
</pre>

<p>如果不用对象或 this 关键字引用变量，ECMAScript 就会把它看作局部变量或全局变量。然后该函数将查找名为 color 的局部或全局变量，但是不会找到。结果如何呢？该函数将在警告中显示 &quot;null&quot;。</p>
</div>

</div>
</div>
<script src="../chrX.js"></script>